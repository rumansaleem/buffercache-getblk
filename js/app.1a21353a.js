(function(e){function t(t){for(var r,i,a=t[0],o=t[1],c=t[2],f=0,d=[];f<a.length;f++)i=a[f],s[i]&&d.push(s[i][0]),s[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);l&&l(t);while(d.length)d.shift()();return u.push.apply(u,c||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={app:0},u=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/buffercache-getblk/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=o;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r,s=n("2b0e"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-screen bg-teal-500 p-4 flex overflow-hidden",attrs:{id:"app"}},[n("Disk",{staticClass:"w-64 bg-white p-4 overflow-y-auto"}),n("div",{staticClass:"flex-1 bg-white p-4"},[n("ProcessList")],1),n("BufferCache",{staticClass:"w-64 bg-white p-4 overflow-y-auto"})],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"text-xl mb-4"},[e._v("Buffer Cache")]),n("p",{staticClass:"mb-1"},[e._v("Buffers")]),n("div",{staticClass:"flex flex-wrap items-center -m-1 mb-3",attrs:{id:"buffer-list"}},e._l(e.buffers,function(t){return n("span",{key:t.id,staticClass:"font-semibold text-xs m-1 border rounded flex flex-col",class:{"bg-black text-white border-black":e.isLocked(t),"bg-gray-200 text-black":!e.isLocked(t)}},[n("div",{staticClass:"inline-flex justify-between items-center font-normal leading-none px-2 py-1"},[n("span",{staticClass:"text-xs ",domProps:{textContent:e._s(t.id)}}),n("span",{staticClass:"text-xs font-semibold text-teal-600",domProps:{textContent:e._s(t.blockNumber||"NA")}})]),n("span",{staticClass:"font-mono text-xs px-2 py-1",domProps:{textContent:e._s(t.blockNumber?t.data||"<empty>":"NULL")}})])}),0),n("p",{staticClass:"mb-1"},[e._v("Hash Queue")]),n("div",{staticClass:"mb-4",attrs:{id:"hash-queue"}},e._l(e.hashqueue,function(t,r){return n("div",{key:r},[n("h5",{staticClass:"font-bold",domProps:{textContent:e._s("blockno mod "+e.hashqueue.length+" = "+r)}}),n("div",{staticClass:"p-2 bg-gray-100 border rounded"},[t.length>0?n("div",e._l(t,function(t){return n("span",{key:t.id,staticClass:"flex flex-col p-2 font-semibold text-xs m-1 border bg-gray-200 rounded"},[n("span",{domProps:{textContent:e._s(""+(t.blockNumber||"NA"))}})])}),0):n("p",[e._v("<empty>")])])])}),0),n("p",{staticClass:"mb-1"},[e._v("Free List")]),n("div",{staticClass:"flex flex-wrap -m-1 mb-3"},e._l(e.freelist,function(t){return n("span",{key:t.id,staticClass:"p-2 font-semibold text-xs m-1 border bg-gray-200 rounded flex flex-col"},[n("span",{staticClass:"text-xs",domProps:{textContent:e._s(t.id)}}),n("span",{domProps:{textContent:e._s("BLK: "+(t.blockNumber||"NA"))}})])}),0)])},o=[],c=n("cebc"),l=n("2f62"),f={name:"buffer-cache",computed:Object(c["a"])({},Object(l["e"])("buffercache",["buffers"]),Object(l["e"])("buffercache/freelist",{freelist:"list"}),Object(l["e"])("buffercache/hashqueue",{hashqueue:"hashTable"}),Object(l["c"])("buffercache",["isLocked"])),methods:Object(c["a"])({},Object(l["b"])("buffercache",["init"])),created:function(){this.init({bufferCount:5,hashQueueSize:4})}},d=f,b=n("2877"),p=Object(b["a"])(d,a,o,!1,null,null,null),m=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"text-xl mb-3"},[e._v("Secondary Memory")]),n("div",{staticClass:"mb-4"},[n("strong",{staticClass:"text-xs uppercase mr-2"},[e._v("status")]),n("span",{staticClass:"text-teal-600 font-bold",domProps:{textContent:e._s(e.statusText)}})]),n("p",{staticClass:"mb-1"},[e._v("Disk Blocks")]),n("div",{staticClass:"flex flex-wrap items-center -m-1 font-mono leading-none",attrs:{id:"buffer-list"}},e._l(e.blocks,function(t){return n("div",{key:t.blockNumber,staticClass:"text-xs m-1 border bg-gray-200 rounded relative overflow-hidden"},[n("div",{staticClass:"inline-block p-1 rounded text-xs text-gray-900 font-hairline",domProps:{textContent:e._s(t.blockNumber)}}),n("p",{staticClass:"py-2 px-4",domProps:{textContent:e._s(t.data||"<empty>")}})])}),0)])},g=[],R=(n("7514"),n("bd86")),v=(n("6c7b"),"initialise"),x=function(e){return{id:e,blockNumber:e,data:null}},_=function(e){return new Array(e).fill(0).map(function(e,t){return x(t+1)})},N={blocks:[],isReading:!1,isWriting:!1},E={isIdle:function(e){return!e.isReading&&!e.isWriting}},k=(r={},Object(R["a"])(r,v,function(e,t){e.blocks=_(t)}),Object(R["a"])(r,"WRITE",function(e,t){var n=t.block,r=t.data;n.data=r}),Object(R["a"])(r,"MARK_READING",function(e){e.isReading=!0}),Object(R["a"])(r,"DONE_READING",function(e){e.isReading=!1}),Object(R["a"])(r,"MARK_WRITING",function(e){e.isWriting=!0}),Object(R["a"])(r,"DONE_WRITING",function(e){e.isWriting=!1}),r),I={READ:function(e,t){var n=e.state,r=e.commit;return new Promise(function(e,s){r("MARK_READING");var u=n.blocks.find(function(e){return e.blockNumber==t});return u?setTimeout(function(){r("DONE_READING"),e(u.data)},1e3,u.data):s(u)})},WRITE:function(e,t){var n=e.state,r=e.commit,s=t.blockNumber,u=t.data;return new Promise(function(e,t){r("MARK_WRITING");var i=n.blocks.find(function(e){return e.blockNumber==s});return i?setTimeout(function(){r("WRITE",{block:i,data:u}),r("DONE_WRITING"),e(u)},4e3):t("Invalid block Number")})}},C={namespaced:!0,state:N,getters:E,mutations:k,actions:I},y={name:"disk",computed:Object(c["a"])({},Object(l["e"])("disk",["blocks","isReading","isWriting"]),{statusText:function(){return this.isReading?"Reading Block...":this.isWriting?"Writing Block...":"Idle!"}}),methods:Object(c["a"])({},Object(l["d"])("disk",[v])),created:function(){this.initialise(10)}},w=y,O=Object(b["a"])(w,h,g,!1,null,null,null),P=O.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"text-xl mb-2"},[e._v("Processes")]),n("form",{staticClass:"flex mb-3",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newProcessName,expression:"newProcessName"}],staticClass:"px-2 py-1 border rounded-l flex-1",attrs:{type:"text",placeholder:"New Process Name"},domProps:{value:e.newProcessName},on:{input:function(t){t.target.composing||(e.newProcessName=t.target.value)}}}),n("button",{staticClass:"bg-teal-500 text-white py-2 px-3 border border-teal-600 rounded-r"},[e._v("Create")])]),e.processes.length?n("div",{staticClass:"flex flex-wrap -m-1"},e._l(e.processes,function(e){return n("Process",{key:e.pid,staticClass:"border p-4 w-72",attrs:{process:e}})}),1):n("div",{},[e._v(" \n        No processes created.\n    ")])])},F=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-1"},[n("div",{staticClass:"mb-3 flex justify-between items-center"},[n("h4",{staticClass:"font-semibold uppercase text-gray-800",domProps:{textContent:e._s(e.process.name+" (PID: "+e.process.pid+")")}}),e.canRun(e.process)?n("button",{staticClass:"p-1 border border-teal-600 bg-teal-500 hover:bg-teal-600 text-white rounded",on:{click:function(t){return t.preventDefault(),e.run(t)}}},[n("svg",{staticClass:"fill-current h-4",attrs:{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[n("polygon",{attrs:{points:"4 4 16 10 4 16"}})])]):e._e()]),n("div",{staticClass:"mb-3 inline-flex items-center"},[n("svg",{staticClass:"fill-current h-4 mr-2",attrs:{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[e.isRunning(e.process)?n("polygon",{attrs:{points:"4 4 16 10 4 16"}}):e.isWaitingForBuffer(e.process)?n("g",{attrs:{id:"hourglass","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M17,18 C17,15.207604 15.3649473,12.7970951 13,11.6736312 L13,8.32636884 C15.3649473,7.2029049 17,4.79239596 17,2 L19,2 L19,0 L1,0 L1,2 L3,2 C3,4.79239596 4.63505267,7.2029049 7,8.32636884 L7,11.6736312 C4.63505267,12.7970951 3,15.207604 3,18 L1,18 L1,20 L19,20 L19,18 L17,18 Z M15,2 C15,4.41895791 13.2822403,6.43671155 11,6.89998188 L11,7.96455557 L11,10 L9,10 L9,7.96455557 L9,6.89998188 C6.71775968,6.43671155 5,4.41895791 5,2 L15,2 Z",id:"Combined-Shape"}})]):e.isSleeping(e.process)?n("g",{attrs:{id:"clock","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M9,8.5 L9,4 L11,4 L11,9.58578644 L14.9497475,13.5355339 L13.5355339,14.9497475 L9,10.4142136 L9,8.5 Z M10,20 C15.5228475,20 20,15.5228475 20,10 C20,4.4771525 15.5228475,0 10,0 C4.4771525,0 0,4.4771525 0,10 C0,15.5228475 4.4771525,20 10,20 Z M10,18 C14.418278,18 18,14.418278 18,10 C18,5.581722 14.418278,2 10,2 C5.581722,2 2,5.581722 2,10 C2,14.418278 5.581722,18 10,18 Z",id:"Combined-Shape"}})]):e._e()]),n("span",{domProps:{textContent:e._s(e.statusText(e.process))}})]),n("h5",{staticClass:"font-semibold text-xs uppercase text-teal-500 mb-2"},[e._v("Add I/O Requests")]),n("form",{staticClass:"mb-4 flex leading-none",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.io_type,expression:"io_type"}],staticClass:"px-1 py-2 border rounded-l bg-white",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.io_type=t.target.multiple?n:n[0]}}},e._l(e.ioTypeOptions,function(t,r){return n("option",{key:r,domProps:{value:t,textContent:e._s(r)}})}),0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.blockNumber,expression:"blockNumber"}],staticClass:"px-1 py-2 border border-l-0 flex-1 text-sm transition-width",attrs:{type:"number",placeholder:"Block No"},domProps:{value:e.blockNumber},on:{input:function(t){t.target.composing||(e.blockNumber=t.target.value)}}}),e.io_type===e.ioTypeOptions.Write?n("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"px-1 py-2 border border-l-0 flex-1 text-sm",attrs:{type:"text",placeholder:"Data"},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}}):e._e(),n("button",{key:"btn",staticClass:"px-3 py-2 bg-teal-500 text-white border border-teal-600 rounded-r",attrs:{type:"submit"}},[e._v("Add")])]),n("h5",{staticClass:"font-semibold text-xs uppercase text-teal-500 mb-2"},[e._v("Buffer I/O Requests")]),e.requests.length>0?n("transition-group",{staticClass:"flex flex-wrap -m-2 max-h-32 overflow-y-auto overflow-x-hidden",attrs:{tag:"div",name:"list"}},e._l(e.requests,function(t){return n("div",{key:t.type+"-"+t.blockNumber,staticClass:"m-2 leading-none inline-flex max-w-90"},[e.isReqRunning(t)?n("span",{staticClass:"inline-flex items-center p-2 bg-green-500 rounded-l"},[n("div",{staticClass:"bg-white w-2 h-2 rounded-full"})]):e._e(),n("span",{staticClass:"capitalize bg-gray-900 text-white p-2 flex-no-shrink",class:{"rounded-l":!e.isReqRunning(t)},domProps:{textContent:e._s(t.type.replace("IO_TYPE_","").toLowerCase())}}),t.type==e.ioTypeOptions.Write?n("span",{staticClass:"flex-grow bg-gray-300 truncate p-2",domProps:{textContent:e._s("'"+t.data+"'")}}):e._e(),n("span",{staticClass:"bg-teal-500 text-white font-semibold p-2 rounded-r flex-no-shrink",domProps:{textContent:e._s(t.blockNumber)}})])}),0):n("div",{staticClass:"mb-2"},[e._v("\n        No requests yet\n    ")])],1)},S=[],B="IO_TYPE_READ",W="IO_TYPE_WRITE",A="RUNNING",L="SLEEPING",j="IDLE",D="WAITING_FOR_ANY_BUFFER",U=function(e){return"WAITING_FOR_BUFFER".concat(e?"_"+e:"")},G={props:{process:{required:!0}},data:function(){return{ioTypeOptions:{Read:B,Write:W},blockNumber:"",io_type:B,data:""}},computed:Object(c["a"])({},Object(l["c"])("processes",["activeRequestsByProcess","isRunning","isWaitingForBuffer","isWaitingForSpecificBuffer","isIdle","isSleeping","canRun","statusText"]),{requests:function(){return this.activeRequestsByProcess(this.process)}}),methods:Object(c["a"])({isReqRunning:function(e){return e===this.process.runningRequest}},Object(l["c"])("buffercache",["getBufferById"]),Object(l["b"])("processes",["runProcess","enqueueRequest"]),{run:function(){this.runProcess(this.process)},submit:function(){this.enqueueRequest({process:this.process,blockNumber:this.blockNumber,type:this.io_type,data:this.data}),this.blockNumber=null,this.data=null}})},M=G,K=(n("c42a"),Object(b["a"])(M,q,S,!1,null,null,null)),Q=K.exports,V={components:{Process:Q},data:function(){return{newProcessName:""}},computed:Object(c["a"])({},Object(l["e"])("processes",{processes:"all"})),methods:Object(c["a"])({},Object(l["d"])("processes",["initialise","createNewProcess"]),{submit:function(){this.createNewProcess(this.newProcessName),this.newProcessName=""}}),created:function(){this.initialise(2)}},Y=V,Z=Object(b["a"])(Y,T,F,!1,null,null,null),$=Z.exports,z={name:"app",components:{BufferCache:m,Disk:P,ProcessList:$}},J=z,H=(n("a5d2"),Object(b["a"])(J,u,i,!1,null,null,null)),X=H.exports,ee=(n("20d6"),{hashTable:[]}),te={hash:function(e){return function(t){return t%e.hashTable.length}},get:function(e,t){return function(n){var r=t.hash(n),s=e.hashTable[r];return s&&s.find(function(e){return e.blockNumber==n})}},has:function(e,t){return function(e){return!!t.get(e)}}},ne={INIT:function(e,t){e.hashTable=new Array(t).fill(0).map(function(){return new Array(0)})},INSERT_IN:function(e,t){var n=t.index,r=t.buffer,s=e.hashTable[n];return s&&s.push(r)},REMOVE_FROM:function(e,t){var n=t.index,r=t.bufferIndex;e.hashTable[n].splice(r,1)}},re={INSERT:function(e,t){var n=e.commit,r=e.getters,s=r.hash(t.blockNumber);return n("INSERT_IN",{index:s,buffer:t}),t},REMOVE:function(e,t){var n=e.commit,r=e.state,s=e.getters,u=t.blockNumber,i=s.hash(u),a=r.hashTable.findIndex(function(e){return e.blockNumber=u});return n("REMOVE_FROM",{index:i,bufferIndex:a}),t},REASSEMBLE:function(e,t){var n=e.commit,r=e.state,s=e.dispatch,u=e.getters,i=t.oldBlockNumber,a=t.buffer;if(!i)return s("INSERT",a);var o=u.hash(i),c=r.hashTable.findIndex(function(e){return e.id==a.id});return n("REMOVE_FROM",{index:o,bufferIndex:c}),s("INSERT",a)}},se={namespaced:!0,state:ee,getters:te,mutations:ne,actions:re},ue=n("75fc"),ie={list:[]},ae={isEmpty:function(e){return e.list.length<1},first:function(e){return e.list[0]}},oe={INIT:function(e,t){return e.list=Object(ue["a"])(t)},POP:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.list.splice(t,1)},APPEND:function(e,t){return e.list.push(t)},PREPEND:function(e,t){return e.list.unshift(t)}},ce={POP:function(e){var t=e.commit,n=e.getters;if(n.isEmpty)return null;var r=n.first;return t("POP"),r},REMOVE:function(e,t){var n=e.commit,r=e.state,s=r.list.findIndex(function(e){return e.id==t.id});return s>-1&&(n("POP",s),t)}},le={namespaced:!0,state:ie,getters:ae,mutations:oe,actions:ce},fe=function(e){return{id:e,blockNumber:null,data:null,locked:!1,delayWrite:!1,validData:!0,old:!1}},de=function(e){return new Array(e).fill(0).map(function(e,t){return fe(t+1)})},be={buffers:[]},pe={freelist:le,hashqueue:se},me={isOld:function(){return function(e){return e.old}},isLocked:function(){return function(e){return e.locked}},isDelayedWrite:function(){return function(e){return e.delayWrite}},isDataValid:function(){return function(e){return e.validData}}},he={INIT:function(e,t){e.buffers=de(t)},LOCK_BUFFER:function(e,t){t.locked=!0},UNLOCK_BUFFER:function(e,t){t.locked=!1},REASSIGN_BUFFER:function(e,t){var n=t.buffer,r=t.blockNumber;n.blockNumber=r,n.validData=!1},READ_IN_BUFFER:function(e,t){var n=t.buffer,r=t.data;n.data=r,n.validData=!0},WRITE_ON_BUFFER:function(e,t){var n=t.buffer,r=t.data;n.data=r,n.delayWrite=!0},MARK_BUFFER_OLD:function(e,t){t.old=!0},MARK_BUFFER_NOT_OLD:function(e,t){t.old=!1}},ge={init:function(e,t){var n=e.commit,r=e.state,s=t.bufferCount,u=t.hashQueueSize;n("INIT",s),n("buffercache/freelist/INIT",r.buffers,{root:!0}),n("buffercache/hashqueue/INIT",u,{root:!0})}},Re={namespaced:!0,state:be,getters:me,mutations:he,actions:ge,modules:pe},ve=(n("a481"),n("96cf"),n("3b8d")),xe=(n("5df3"),n("1c4c"),n("ac6a"),n("386d"),n("f559"),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{id:e,blockNumber:t,data:r,type:n,buffer:null,written:!1,completed:!1}}),_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{pid:e,name:t||"Process ".concat(e),runningRequest:null,queuedRequests:n||[],completedRequests:[],status:j,newRequestId:1}},Ne={all:[],newProcessId:1},Ee={processById:function(e){return function(t){return e.all[t]}},isRunning:function(){return function(e){return e.status==A}},isWaitingForBuffer:function(){return function(e){return e.status==D||e.status.startsWith(U(null))}},isWaitingForSpecificBuffer:function(){return function(e){return e.status.startsWith(U(null))}},getSpecificBufferId:function(e,t){return function(e){if(!t.isWaitingForSpecificBuffer(e))return!1;var n=e.status.search(/[0-9]+$/);return parseInt(e.status.substring(n))}},isIdle:function(){return function(e){return e.status==j}},isSleeping:function(){return function(e){return e.status==L}},canRun:function(e,t){return function(e){return t.isSleeping(e)}},statusText:function(e,t){return function(e){return t.isRunning(e)?"Running...":t.isSleeping(e)?"Sleeping! ZzZzZ...":t.isIdle(e)?"Idle! No requests to perform":t.isWaitingForSpecificBuffer(e)?'Waiting for Buffer with ID -  "'.concat(t.getSpecificBufferId(e),'"'):t.isWaitingForBuffer(e)?"Waiting for any free Buffer":"Unknown State"}},activeRequestsByProcess:function(){return function(e){return[e.runningRequest].concat(Object(ue["a"])(e.queuedRequests)).filter(function(e){return e})}}},ke={initialise:function(e,t){Array.from(Array(t).keys()).forEach(function(){e.all.push(_e(e.newProcessId++))})},enqueueRequest:function(e,t){var n=t.process,r=t.blockNumber,s=t.type,u=t.data;n.queuedRequests.push(xe(n.newRequestId++,r,s,u))},startQueuedRequest:function(e,t){t.runningRequest=t.queuedRequests.shift(),t.runningRequest.started=!0},completeRunningRequest:function(e,t){t.runningRequest.completed=!0,t.completedRequests.push(t.runningRequest),t.runningRequest=null},createNewProcess:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.all.push(_e(e.newProcessId++,t))},ASSIGN_BUFFER_TO_REQUEST:function(e,t){var n=t.process,r=t.buffer;n.runningRequest.buffer=r},REQUEST_WRITTEN:function(e,t){t.runningRequest.written=!0},SET_IDLE:function(e,t){t.status=j},SET_SLEEPING:function(e,t){t.status=L},SET_RUNNING:function(e,t){t.status=A},WAIT_FOR_ANY_BUFFER:function(e,t){t.status=D},WAKE_WAITING_FOR_ANY_BUFFER:function(e){e.all.filter(function(e){return e.status!=D}).forEach(function(e){return e.status=L})},WAIT_FOR_SPECIFIC_BUFFER:function(e,t){var n=t.process,r=t.buffer;n.status=U(r.id)},WAKE_WAITING_FOR_SPECIFIC_BUFFER:function(e,t){e.all.filter(function(e){return e.status!=U(t.id)}).forEach(function(e){return e.status=L})}},Ie={enqueueRequest:function(e,t){var n=e.commit,r=e.rootState,s=t.process,u=t.blockNumber,i=t.type,a=t.data,o=void 0===a?null:a,c=r.disk.blocks.length;if(u<1||u>c)return alert("Block number must be within disk blocks range!");u=parseInt(u),n("enqueueRequest",{process:s,blockNumber:u,type:i,data:o}),s.status==j&&n("SET_SLEEPING",s)},executeReadRequest:function(){var e=Object(ve["a"])(regeneratorRuntime.mark(function e(t,n){var r,s,u,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,s=t.dispatch,u=n.runningRequest.buffer,!u){e.next=6;break}return s("kernel/brelse",u,{root:!0}),r("completeRunningRequest",n),e.abrupt("return",!0);case 6:return i=n.runningRequest.blockNumber,e.next=9,s("kernel/bread",{process:n,blockNumber:i},{root:!0});case 9:return a=e.sent,a&&r("ASSIGN_BUFFER_TO_REQUEST",{process:n,buffer:a}),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),executeWriteRequest:function(){var e=Object(ve["a"])(regeneratorRuntime.mark(function e(t,n){var r,s,u,i,a,o,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,s=t.dispatch,u=n.runningRequest.buffer,i=n.runningRequest.written,!i){e.next=7;break}return a=s("kernel/brelse",u,{root:!0}),r("completeRunningRequest",n),e.abrupt("return",a);case 7:if(!u){e.next=12;break}return o=n.runningRequest.data,r("buffercache/WRITE_ON_BUFFER",{buffer:u,data:o},{root:!0}),r("REQUEST_WRITTEN",n),e.abrupt("return",!1);case 12:return c=n.runningRequest.blockNumber,e.next=15,s("kernel/bread",{process:n,blockNumber:c},{root:!0});case 15:return l=e.sent,l&&r("ASSIGN_BUFFER_TO_REQUEST",{process:n,buffer:l}),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),runProcess:function(e,t){var n=e.commit,r=e.dispatch,s=e.getters;return new Promise(function(){var e=Object(ve["a"])(regeneratorRuntime.mark(function e(u){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.runningRequest||n("startQueuedRequest",t),n("SET_RUNNING",t),i=t.runningRequest.type.replace("IO_TYPE_",""),i=i.charAt(0).toUpperCase()+i.substr(1).toLowerCase(),e.next=6,r("execute".concat(i,"Request"),t);case 6:return a=e.sent,s.isWaitingForBuffer(t)||n("SET_SLEEPING",t),!t.runningRequest&&t.queuedRequests.length<1&&n("SET_IDLE",t),e.abrupt("return",setTimeout(u,300,a));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},Ce={namespaced:!0,state:Ne,getters:Ee,mutations:ke,actions:Ie},ye={isRunning:!1},we={},Oe={},Pe={getblk:function(e,t){var n=e.commit,r=e.dispatch,s=e.rootGetters,u=t.process,i=t.blockNumber;return new Promise(function(){var e=Object(ve["a"])(regeneratorRuntime.mark(function e(t){var a,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!s["buffercache/hashqueue/has"](i)){e.next=8;break}if(a=s["buffercache/hashqueue/get"](i),s["buffercache/isLocked"](a)){e.next=6;break}return n("buffercache/LOCK_BUFFER",a,{root:!0}),r("buffercache/freelist/REMOVE",a,{root:!0}),e.abrupt("return",t(a));case 6:return n("processes/WAIT_FOR_SPECIFIC_BUFFER",{process:u,buffer:a},{root:!0}),e.abrupt("return",t(!1));case 8:if(!s["buffercache/freelist/isEmpty"]){e.next=11;break}return n("processes/WAIT_FOR_ANY_BUFFER",u,{root:!0}),e.abrupt("return",t(!1));case 11:return e.next=13,r("buffercache/freelist/POP",null,{root:!0});case 13:if(o=e.sent,n("buffercache/LOCK_BUFFER",o,{root:!0}),!o.delayWrite){e.next=22;break}return r("bwrite",{buffer:o,synchronous:!1}).then(function(){return setTimeout(r,0,"brelse",o)}),e.t0=t,e.next=20,r("getblk",{process:u,blockNumber:i});case 20:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 22:return c=o.blockNumber,n("buffercache/REASSIGN_BUFFER",{buffer:o,blockNumber:i},{root:!0}),e.next=26,r("buffercache/hashqueue/REASSEMBLE",{buffer:o,oldBlockNumber:c},{root:!0});case 26:return e.abrupt("return",t(o));case 27:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},brelse:function(e,t){var n=e.commit,r=e.rootGetters;n("processes/WAKE_WAITING_FOR_ANY_BUFFER",null,{root:!0}),n("processes/WAKE_WAITING_FOR_SPECIFIC_BUFFER",t,{root:!0});var s=r["buffercache/isDataValid"],u=r["buffercache/isOld"];return s(t)&&!u(t)?n("buffercache/freelist/APPEND",t,{root:!0}):n("buffercache/freelist/PREPEND",t,{root:!0}),n("buffercache/UNLOCK_BUFFER",t,{root:!0}),t},bread:function(e,t){var n=e.commit,r=e.dispatch,s=e.rootGetters,u=t.process,i=t.blockNumber;return new Promise(function(){var e=Object(ve["a"])(regeneratorRuntime.mark(function e(t){var a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r("getblk",{process:u,blockNumber:i});case 2:if(a=e.sent,a){e.next=5;break}return e.abrupt("return",setTimeout(t,1e3,!1));case 5:if(!s["buffercache/isDataValid"](a)){e.next=7;break}return e.abrupt("return",setTimeout(t,1e3,a));case 7:return e.next=9,r("disk/READ",a.blockNumber,{root:!0});case 9:return o=e.sent,n("buffercache/READ_IN_BUFFER",{buffer:a,data:o},{root:!0}),e.abrupt("return",setTimeout(t,1e3,a));case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},bwrite:function(){var e=Object(ve["a"])(regeneratorRuntime.mark(function e(t,n){var r,s,u,i,a,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,s=t.commit,u=t.rootGetters,i=n.buffer,a=n.synchronous,o=void 0!==a&&a,c=u["buffercache/isDelayedWrite"],!o){e.next=7;break}return e.next=6,r("disk/WRITE",i,{root:!0});case 6:return e.abrupt("return",this.brelse(i));case 7:r("disk/WRITE",i,{root:!0}).then(null),c(i)&&s("buffercache/MARK_BUFFER_OLD",i,{root:!0});case 9:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},Te={namespaced:!0,state:ye,getters:we,mutations:Oe,actions:Pe};s["a"].use(l["a"]);var Fe=new l["a"].Store({modules:{buffercache:Re,disk:C,processes:Ce,kernel:Te},strict:!0}),qe=Fe;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(X)},store:qe}).$mount("#app")},"7fbb":function(e,t,n){},a5d2:function(e,t,n){"use strict";var r=n("f809"),s=n.n(r);s.a},c42a:function(e,t,n){"use strict";var r=n("7fbb"),s=n.n(r);s.a},f809:function(e,t,n){}});
//# sourceMappingURL=app.1a21353a.js.map